<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Gerenciador de Condomínio</title>
    <link rel="stylesheet" href="index.css" />
    <!-- <script src="./database/knex.js"></script> -->
  </head>
  <body>
    <h1>Projeto Base!</h1>

    <div class="quadrado">
      <p>Esse é o projeto base com os pacotes:</p>
      <ul>
        <li>electron</li>
        <li>electron-builder</li>
        <li>electron-updater</li>
        <li>electron-log</li>
        <li>sqlite3</li>
      </ul>
    </div>

    <div class="quadrado">
      <p>Versão: <span id="version">vX.Y.Z</span></p>
    </div>

    <div class="quadrado">
      <p>Status: <span id="messages"></span></p>
    </div>

    <div class="quadrado">
      <p>Database: <span id="database"></span></p>
    </div>

    <script>
      //Database read test
      var sqlite3 = require("sqlite3").verbose();
      var db = new sqlite3.Database("./database.sqlite");
      db.serialize(function() {
        db.run("CREATE TABLE lorem (info TEXT)");
        var stmt = db.prepare("INSERT INTO lorem VALUES (?)");
        for (var i = 0; i < 10; i++) {
          stmt.run("Ipsum " + i);
        }
        stmt.finalize();
        db.each("SELECT rowid AS id, info FROM User", function(err, row) {
          console.log(row.id + ": " + row.info);
        });
      });
      db.close();

      // Display the current version
      const version = window.location.hash.substring(1);
      document.getElementById("version").innerText = version;

      // Listen for auto-updater status
      const { ipcRenderer } = require("electron");
      ipcRenderer.on("message", function(event, text) {
        const message = document.getElementById("messages");
        message.innerHTML = text;
      });
    </script>
  </body>
</html>
