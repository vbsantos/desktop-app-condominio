<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Gerenciador de Condomínio</title>
    <link rel="stylesheet" href="index.css" />
  </head>
  <body>
    <h1>Projeto Base!</h1>

    <div class="quadrado">
      <p>Esse é o projeto base com os pacotes:</p>
      <ul>
        <li>electron</li>
        <li>electron-builder</li>
        <li>electron-updater</li>
        <li>electron-log</li>
        <li>sqlite3</li>
      </ul>
    </div>

    <div class="quadrado">
      <p>Versão: <span id="version">vX.Y.Z</span></p>
    </div>

    <div class="quadrado">
      <p>Status: <span id="messages"></span></p>
    </div>

    <div class="quadrado">
      <p>Usuário: <span id="database"></span></p>
    </div>

    <script>
      // Display administrator's name
      var sqlite3 = require("sqlite3").verbose();
      var db = new sqlite3.Database("database.sqlite");
      var database = document.getElementById("database");
      db.serialize(function() {
        db.run("CREATE TABLE IF NOT EXISTS users (name TEXT)");
        var stmt = db.prepare("INSERT INTO users VALUES (?)");
        stmt.run("Vinícius");
        stmt.finalize();
        db.each("SELECT rowid AS id, name FROM users", function(err, row) {
          database.innerHTML = row.name;
        });
      });
      db.close();

      // Display the current version
      const version = window.location.hash.substring(1);
      document.getElementById("version").innerText = version;

      // Listen for auto-updater status
      const { ipcRenderer } = require("electron");
      ipcRenderer.on("message", function(event, text) {
        const message = document.getElementById("messages");
        message.innerHTML = text;
      });
    </script>
  </body>
</html>
